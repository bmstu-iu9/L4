Типы данных языка Python
========================

Данные в языке Python делятся на две группы: простые (обозначают единственное
значение) и составные (хранят в себе несколько значений). Рассмотрим основные
типы данных языка Python.

1. Простые типы данных:
   1. `int` — целое число.
   2. `float` — вещественное (дробное, действительное) число.
   3. `str` — строка.
2. Составные типы данных:
   1. `list` — список, _изменяемый_ набор значений, пронумерованных целыми
      числами, начиная с `0`.
   2. `tuple` — кортеж, _неизменяемый_ набор значений, пронумерованных целыми
      числами, начиная с `0`.
   3. `dict` — словарь (ассоциативный массив) — изменяемый набор значений,
      индексируемый неизменяемыми типами данных (числа, строки, кортежи).
   4. `set` — множество — неупорядоченный набор значений без повторений.

Целые числа (`int`)
-------------------

Целые числа могут быть записаны в разных системах счисления. В десятичной форме
они записываются как последовательности десятичных цифр. В шестнадцатеричной
форме — как последовательности шестнадцатеричных цифр (`0`…`9`, `A`…`F`),
предварённых знаком `0x`. Восьмеричные числа — последовательности восьмеричных
цифр, начинаются на `0t`. Двоичные — начинаются `0b`.

    >>> 10
    10
    >>> 0xA
    10
    >>> 0t12
    10
    >>> 0b1010
    10

Если у операций `+`, `-`, `*`, `//`, `%` оба операнда целые, то результат будет
целым. Если хотя бы один из операндов вещественный — результат вещественный.
Результат операции `/` всегда вещественный.

Размер целых чисел неограничен. Длина целого числа ограничивается лишь доступной
памятью компьютера.

Тип целых чисел в Python называется `int`. Одновременно, `int` можно
как встроенную функцию, преобразующую свой аргумент в целое число:

    >>> int(3.1415926)
    3
    >>> int('1000000')
    1000000

Вещественные числа
------------------
**Вещественные числа** в Python моделируют действительные числа в математике.
В отличие от целых чисел, вещественные числа имеют ограниченный диапазон
и ограниченную точность.

Диапазон от 10<sup>−323</sup> до 10<sup>+308</sup>. Если при расчётах получится
меньшее число, то оно представляется как ноль, если большее — произойдёт ошибка
переполнения. Точность ограничена ≈15 десятичными знаками после запятой.

Нижняя граница:

    >>> 10.0**-323
    1e-323
    >>> 10.0**-324
    0.0

Верхняя граница:

    >>> 10.0**308
    1e+308
    >>> 10.0**309
    Traceback (most recent call last):
      File "<pyshell#24>", line 1, in <module>
        10.0**309
    OverflowError: (34, 'Result too large')

Точность:

    >>> 1.0 + 0.000000000000001
    1.000000000000001
    >>> 1.0 + 0.0000000000000001
    1.0

Вещественные числа, в отличие от целых, всегда содержат или знак разделителя
целой и дробной части (точку, `.`), или показатель степени (`e`). Разделителем
целой и дробной части является точка, т.к. запятая используется для разделения
параметров функции и при построении составных типов данных (массивы, кортежи
и т.д.)

Вещественное число может быть записано в показательной форме в виде

    ‹мантисса›e‹степень›

которое означает `‹мантисса›`×10<sup><tt>‹степень›</tt></sup>. Примеры:

    6.022e23       # число Авогадро
    1.38e-23       # постоянная Больцама
    3e8            # округлённое значение скорости света в м/с

Класс вещественных чисел в Python называется `float`, он же — встроенная
функция-конструктор, преобразующая свой аргумент к вещественному числу:

    >>> float('3.1415926')
    3.1415926
    >>> float('10000000000000000000000000000000000000000')
    1e+40

Математическая библиотека (`math`)
----------------------------------
В Python есть библиотека, содержащая основные математические функции,
работающие с вещественными числами: тригонометрия, логарифмы и т.д.
Называется она `math`, подключается к программе как

    from math import *                 # №1
    from math import sin, pi           # №2
    import math                        # №3

В форме №1 в программе становятся доступными все константы и функции,
определённые в библиотеке.

    from math import *

    print(sin(pi/2))
    print(cos(pi/2))

В форме №2 — те, что явно перечислены после ключевого слова `import`.

    from math import sin, pi

    print(sin(pi/2))
    print(cos(pi/2))                   # ОШИБКА! cos не виден!

В форме №3 — в программе доступен объект `math`, функции библиотеки
доступны как поля и методы этого объекта.

    import math

    print(math.sin(math.pi/2))
    print(math.cos(math.pi/2))

Функции библиотеки можно посмотреть во встроенной документации:

    >>> import math
    >>> help(math)
    ‹длинная справка›
    >>> help(math.sin)
    Help on built-in function sin in module math:

    sin(x, /)
        Return the sine of x (measured in radians).

### Преобразование между целыми и вещественными числами

Для преобразования, во-первых, можно использовать конструкторы `float`
и `int`. В библиотеке `math` есть функции `floor`, `ceil` и `round`.
Разобраться с ними самостоятельно.

Строки
------
Строка (класс `str`) представляет последовательность печатных знаков. Знаки,
которые представляют строки в Python 3, являются символами Юникода, т.е.
включают в себя буквы разных алфавитов, цифры, знаки препинания, иероглифы,
пиктограммы, математические знаки и эмодзи. В противоположность, в Python 2.7
строки состояли из однобайтовых символов конкретной кодировки (например,
кодировки Windows-1251 на Windows в русскоязычной локализации).

Строки занимают промежуточное положение между простыми и составными типами
данных. С одной стороны, они хранят несколько значений. А с другой стороны,
у этих значений нет собственного типа — операция индексации `s[i]` возвращает
не печатный символ, а строку из одного знака.

Строки — **неизменяемый тип данных.**

Конструктор строки — функция `str`, которая для аргумента любого типа построит
строку. Если ей передать строку — то вернётся точная копия строки.

    >>> str(True)
    'True'
    >>> str(100500)
    '100500'
    >>> str(1000000000000000000.0)
    '1e+18'
    >>> str(None)
    'None'
    >>> str('hello')
    'hello'
    >>> str(str)
    "<class 'str'>"

### Запись строк в программе
Строки записываются в одинарных `'...'` или двойных `"..."` кавычках. В каких
кавычках записывать — это дело принятого стиля программирования. Чаще пишутся
одинарные кавычки.

Если строка записана в одинарных кавычках, то внутри можно использовать
двойные:

    'Он сказал: "Привет!"'

Если в двойных — внутри можно использовать одинарные (апострофы):

    "Let's go, Brandon!"

Помимо обычных, печатных символов, существуют особые управляющие символы,
например, символ перевода строки. Для записи подобных символов используются
так называемые **escape-последовательности** — последовательности знаков,
начинающися со знака `\`. (Клавиша «\» рядом с Backspace или «Ъ»
на клавиатуре, не путать с «/», расположенной между «Ю» и Shift!)

Escape-последовательность | значение
--------------------------|---------
`\\`                      | Собственно, знак `\`
`\n`                      | Перевод строки
`\r`                      | Возврат каретки (возврат к началу строчки)
`\t`                      | Знак табуляции (клавиша Tab)
`\xNN`                    | Символ с шестнадцатиричным кодом NN
`\uNNNN`                  | Символ с шестнадцатиричным кодом NNNN
`\UNNNNNNNN`              | Символ с шестнадцатиричным кодом NNNNNNNN
`\b`                      | Возврат на символ назад при печати
`\a`                      | При печати выдаёт звуковой сигнал
`\"`                      | Двойная кавычка
`\'`                      | Одинарная кавычка (апостроф)

Примеры на `\r` и `\b` (нужно запускать в окне консоли, в IDLE не работает):

    >>> print('abcdefghi\r!!!')
    !!!defghi
    >>> print('hello\b!')
    hell!
    >>> print('hello\b\b\b!')
    he!lo
    >>> print('\a')                    # слышен системный звуковой сигнал

Другие примеры (работают в IDLE):

    >>> print("abc\ndef\nghi")
    abc
    def
    ghi
    >>> print('\x30')
    0
    >>> print('\x40')
    @
    >>> print('\u0040')
    @
    >>> print('\u03BB')
    λ
    >>> print('\u2261')
    ≡
    >>> print('7 \u2264 7, 8 \u2265 7')
    7 ≤ 7, 8 ≥ 7
    >>> print('Пример на табуляцию:\na\tbb\tccc\tdddd\teeeee\t!')
    Пример на табуляцию:
    a	bb	ccc	dddd	eeeee	!
    >>> print('1\t1\n22\t22\n333\t333\n4444\t4444\n55555\t55555')
    1	1
    22	22
    333	333
    4444	4444
    55555	55555

Из всех escape-последовательностей чаще всего мы будем пользоваться переводом
строки (`\n`), чуть реже табуляцией (`\t`), представлением самого знака `\`
(`\\`) и кавычками, чтобы их записывать внутри строк (`\'`, `\"`).

Символ перевода строки `\n` при печати выполняет переход на новую строку.

**Одна escape-последовательность представляет 1 символ строки.** Например,
строка `\n\n\n` состоит из трёх символов — трёх переводов строки.


### Операции, применимые к строке

К строкам применима операция `+`, выполняющая конкатенацию (склеивание)
строк:

    >>> "штука" + 'турка'
    'штукатурка'

Для целых чисел из курса 1 класс известно, что 3×5 = 3+3+3+3+3 (5 раз).
В Python это же применимо и к строкам:

    >>> 'строка' * 3
    'строкастрокастрока'
    >>> 20 * '*'
    '********************'

Можно использовать сокращённые операторы присваивания:

    >>> s = 'штука'
    >>> s += 'турка'
    >>> s
    'штукатурка'

Строки можно сравнивать при помощи операций отношения, сравнение
осуществляется в алфавитном порядке (точнее, по номерам символов в таблице
Юникода):

    >>> 'арбуз' < 'дыня'
    True
    >>> 'штукатурка' > 'штука'
    True
    >>> 'hello' <= 'bye'
    False
    >>> 'адвокат' > 'антрекот'
    False
    >>> 'адвокат' < 'антрекот'
    True

Если одна строка является префиксом другой, то более короткая строка считается
меньше.

Для строк есть ещё одна операция отношения — `in`, проверяет вхождение подстроки

    >>> 'кот' in 'антрекот'
    True
    >>> 'пёс' in 'антрекот'
    False
    >>> 'пёс' not in 'антрекот'
    True
    >>> 'ад' not in 'адвокат'
    False

Операция `not in` противоположна операции `in`.

К строкам применима встроенная функция `len(•)`, возвращающая длину строки:

    >>> len('штукатурка')
    10
    >>> len('')
    0
    >>> len('\\\\')
    2
    >>> len('\n\n\n')
    3

Можно обращаться символу в строке по номеру, используя операцию
индексации `s[i]`, где `s` — строка, `i` — **индекс** или номер символа. Индекс
может быть положительным от `0` до `len(s)-1`, где `len(s)` — длина строки
(символы строки нумеруются с нуля).

Либо отрицательным от `-len(s)` до `-1`, в этом случае имеется ввиду номер
от конца строки. Если индекс отрицательный, например `s[-x]`, то подразумевается
индекс `s[len(s)-x]`. Т.е. чтобы из отрицательного индекса получить настоящий,
нужно его прибавить к длине строки.

    >>> s = 'Hello!'
    >>> s[0]
    'H'
    >>> s[1]
    'e'
    >>> s[2]
    'l'
    >>> s[5]                           # это последний, т.к. индекс должен быть
    '!'                                # от 0 до len(s)−1
    >>> len(s)
    6
    >>> s[-1]                          # обращение к последнему
    '!'
    >>> s[-2]                          # предпоследний
    'o'
    >>> s[-6]                          # начальный
    'H'

Полезные методы строк
---------------------
Строки, как и другие типы данных Python, являются объектами, и у них есть свои
методы. Все методы строк можно получить во встроенной справке:

    >>> help(str)

Некоторые полезные методы:

* `s.split()` — разбивает строку по пробельным символам,
* `s.split(sep)` — разбивает строку по указанному разделителю,
* `s.join(xs)` — объединяет элементы последовательности `xs` с разделителем `s`,
  `xs` — должна быть последовательностью строк,
* `s.startswith(t)`, `s.endswith(t)` — `True`, если строка `s` начинается или
  заканчивается на `t`,
* `s.find(t)` — ищет индекс, начиная с которого подстрока `t` входит в строку
  `s`, `-1`, если не найдено.
* `s.trim()` — удаляет из строки начальные и конечные пробельные символы
  (пробелы, табуляции, `\n`, `\r`),
* семейство методов, проверяющих содержание — `True`, когда строка непустая
  и все символы заданного типа:
  * `s.isdigit()` — все цифры,
  * `s.isalpha()` — все буквы,
  * `s.isalnum()` — все либо буквы, либо цифры,
  * `s.isspace()` — все пробельные символы (пробел, `\t`, `\n`, `\r`),
  * `s.ispunct()` — все знаки пунктуации и т.д.

Примеры:

    >>> 'раз   два три  четыре'.split()
    ['раз', 'два', 'три', 'четыре']
    >>> 'one,two,,three'.split(',')
    ['one', 'two', '', 'three']
    >>> '+'.join(['раз', 'два', 'три'])
    'раз+два+три'
    >>> '+'.join('hello')
    'h+e+l+l+o'
    >>> '   \n\t  строка   \t\t\n\r\n    '.trim()
    'строка'

Полезные функции при работе со строками
---------------------------------------














